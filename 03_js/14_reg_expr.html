<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>


  <script>

    /*
      정규식(regular expression)

      1. 어떤 문자열이 특정 패턴을 가지고 있는 확인하기 위한 표현식이다.
      2. JavaScript 정규식 표현 방법
        /정규식/
      3. JavaScript 정규식 메소드
        /정규식/.test(문자열) : 정규식 패턴을 가지고 있으면 true 반환, 아니면 false 반환
    */

    /*
      정규식 메타 문자

      1. 정규식에서 특별한 의미를 가진 문자를 의미한다.
      2. 주요 메타 문자
        1) .
          (1) 모든 단일문자
          (2) b.at : baat, bbat, bcat, bdat, ... / 불가 bat, baat    (글자가 안들어오는건 안됨. 두글자가 들어오는 것도 안됨. 반드시 한글자가 들어와야 한다.) 
        2) *
          (1) 0개 이상의 반복 문자
          (2) goo* : go, god, goood, ...                            (문자의 0번이상 반복 가능. 글자 안들어오는 것 가능. 앞에 go까지는 나와줘야함. 그 뒤에는 뭐가 나오든 상관 없음)
        3) +
          (1) 1개 이상의 반복 문자
          (2) goo+ : goo, good, goood, ...  
        4) ^
          (1) 시작이 일치하는 문자
          (2) ^a : app, apple, asia, africa
        5) $
          (1) 끝이 일치하는 문자
          (2) end$ : end, the end, ... / 불가 ending
        6) ?
          (1) 0개 이상의 문자
          (2) colou?r : color, colour           //u가 있어도 되고 없어도 된다.
        7) ()
          (1) 괄호 내의 문자를 문자 패턴으로 간주 (그룹)
          (2) (app)A? : appA, appappA, appappappA, ...  //ex)주소에서 컴마가 반복될때 사용하는 등
        8) |
          (1) 또는
          (2) a(b|c) : ab, ac
        9) \
          (1) 이스케이프, 역슬래시 뒤에 오는 메타 문자를 일반 문자로 간주
          (2) \*, \., \?, ...
        10) {m}
          (1) 정확히 m개 문자               (0 <= m <=255)
          (2) a{3} : aaa
        11) {m,}
          (1) m개 이상 문자                 (0 <= m <=255)
          (2) a{3,} : aaa, aaaa, aaaaa, ...
        12) {m,n}
          (1) m개 이상 n개 이하 문자        (0 <= m <=255)
          (2) a{2,3} : aa, aaa 
    */

  </script>

  <div id="div1">
    <input type="text">
    <button type="button" onclick="myFunc1()">검사</button>
  </div>
  
  <script>
  
    function myFunc1() {
    var regExpr = /^b.at$/;                // 이 패턴에 맞는 문자열만 '패턴 일치'
    if(regExpr.test(document.querySelector('#div1 > input').value)){
      alert('패턴 일치');         // 이제 alert 에서 window는 그만 적고 생략할게요~~
    } else {
      alert('패턴 불일치');
    }
  }
    
  // 휴대전화 패턴, 이메일 패턴 등등 이렇게 걸러냅니당
  </script>

  <script>
    /*
      대괄호 표현식
      1. 단일 문자 또는 조합 요소를 나타낼 때 사용한다.
      2. 사용 방법 예시
        1) [.]    : 문자 .
        2) [a]    : 문자 a
        3) [ab]   : 문자 a 또는 문자 b                               ex) [Nn][Oo] :  No nO NO no 4개가 올 수 있는 정규식
        4) [^a]   : 문자 a가 아닌 모든 문자                          !!!주의사항!!!   ^[a] = a로 시작하는 문자
        5) [a-d]  : 문자 a부터 문자 d까지  (a, b, c, d 중 하나)      ex) [가-힣] : 모든 한글 중 하나    ex) [a-]   : 문자 a 또는 문자 -으로
        6) [][ab] : 문자 [ 또는 문자 ] 또는 문자 a 또는 문자 b 
    */    
  </script>

  <div id="div2">
    <input type="text">
    <button type="button" onclick="myFunc2()">검사</button>
  </div>

  <script>
    function myFunc2() {
      var regExpr = /[A-Za-z]+$/;                  //마지막 문자가 영어로 끝나는 문자열 판별. !!공백도 글자로 인식하므로 공백 주의해야함!!
      if(regExpr.test(document.querySelector('#div2 > input').value)){
        alert('패턴일치');
      } else {
        alert('패턴 불일치');
      }
    }
  </script>

  <script>

    // 숫자 정규식
    var regNumber = /[0-9]/;


    // 알파벳
    var regAlphabet = /[A-Za-z]/;


    // 한글
    var regHangul = /[ㄱ|가-힣]/;


    // 특수문자
    var regSpecial = /[^0-9A-Za-z]/;
  </script>

  <script>
    // 자바에서 쓴다면~  사실 쓸 일 별로 없어용. ㅋㅋ 아래 3개는 그냥 해본거라고 쳐요...
    // Naming Convension 기준

    // 클래스명
    var regClass = /[A-Z][A-za-z0-9_$]*/;

    // 변수명, 메소드명
    var regFinal = /[A-Z][A-Z0-9_$]+/;
    
    // 상수

  </script>

  <hr>

  <div id="div3">
    <input type="text">
    <button type="button" onclick="myFunc3()">검사</button>
  </div>

  <script>
    

    function myFunc3() {
    var inp = document.querySelector('#div3 > input').value;

    var regEmail = /^[A-Za-z0-9-_]{2,}@[A-Za-z0-9]{2,}(\.[A-Za-z]{2,6}){1,2}$/;
    if(regEmail.test(inp)){
      alert('Email 맞다');
    } else{
      alert('Email 아니다');
    }
  }

    /*
    // 8~16자의 영문 대/소문자, 숫자, 특수문자를 사용해 주세요.
    var length = inp.length;
    var passCount = /[A-Z]/.test(inp)            // 대문자가 포함되면 true 반환 (true는 1로 처리함)
                  + /[a-z]/.test(inp)            // 소문자가 포함되면 true 반환 (true는 1로 처리함)
                  + /[0-9]/.test(inp)            // 숫자가 포함되면 true 반환 (true는 1로 처리함)
                  + /[^A-Za-z0-9]/.test(inp);    // 특수문자가 포함되면 true 반환 (true는 1로 처리함)   
    if(length >=8 && length <= 16 && passCount === 4) {      //조건을 ===가 아니여도 >=3 이나 >=2 이렇게 올 수도 있겠죠(위 조건중 3개를 만족, 2개를 만족 이렇게~ 다양한 방식으로 사용)
      alert('PW 맞다.');
    } else {
      alert('PW 아니다.');
     }
    }
    */

    /* 휴대전화 양식(-이 올 수도 안 올수도 있음)
    function myFunc3() {
      var inp = document.querySelector('#div3 > input').value;
      var regMobile = /^010-{0,1}[0-9]{4}-{0,1}[0-9]{4}$/;
      
      if(regMobile.test(inp)) {
        alert('휴대전화 맞다.');
      } else {
        alert('휴대전화 아니다.');
      }
    }
    */
   
   /*ip 주소양식
   function myFunc3() {
     var inp = document.querySelector('#div3 > input').value;
     var regIpAddr = /^((([0-9]{1,2})|(1[0-9]{2})|(2[0-4][0-9])|(25[0-5]))\.){3}((([0-9]{1,2})|(1[0-9]{2})|(2[0-4][0-9])|(25[0-5])))$/;  // 192.168.0.255

   if(regIpAddr.test(inp)){
       alert('IP주소 맞다.');
     } else {
       alert('IP주소 아니다.');
     }
   }
   */
    
    /* 네이버 아이디 정규식
    function myFunc3() {
     var inp = document.querySelector('#div3 > input').value;
     var regId = /^[0-9a-z-_]{5,20}$/;

    if(regId.test(inp)){
       alert('아이디로 적합하다');
     } else {
       alert('아이디로 적합하지 않다');
     }
   }
   */
  

  </script>

<hr>

<div>
  <form id="frm-join"
        action="/server/somewhere"
        method="post">
    <div>
      <label for="id">아이디</label>
      <input type="text" id="id" name="id">
    </div>
    <div>
      <label for="pw">비밀번호</label>
      <input type="password" id="pw" name="pw">
    </div>
    <div>
      <label for="pw-check">비밀번호 확인</label>
      <input type="password" id="pw-check">
    </div>
    <div>
      <label for="email">이메일</label>
      <input type="text" id="email" name="email">
    </div>
    <div>
      <button type="submit">가입</button>
      <button type="reset">다시작성</button>
    </div>
  </form>
</div>
<script>
  // 전역 변수
  var validId = false;
  var validPw = false;
  var validPwCheck = false;
  var validEmail= false;

  // 함수 선언 & 이벤트

  // 함수 호출
  function fnValidId(){
  return /^[0-9a-z-_]{5,20}$/.test(document.getElementById('id').value);
  }
  function fnValidPw(){
    var inpPw = document.getElementById('pw').value;
    var length = inpPw.length;
    var passCount = /[A-Z]/.test(inpPw)            
                  + /[a-z]/.test(inpPw)           
                  + /[0-9]/.test(inpPw)          
                  + /[^A-Za-z0-9]/.test(inpPw);
                  return length >= 8 && length <= 16 && passCount >=3;    
  }
  function fnValidPwCheck(){
    var inpPw = document.getElementById('pw').value;
    var inpPwCheck = document.getElementById('pw-check').value;
    return inpPw.lengt !==0 && inpPw === inpPwCheck && inpPwCheck;
  }
  function fnValidEmail(){
    return /^[A-Za-z0-9-_]{2,}@[A-Za-z0-9]{2,}(\.[A-Za-z]{2,6}){1,2}$/.test(document.getElementById('email').value);
  }

  // 함수 호출 & 이벤트
  document.getElementById('frm-join').addEventListener('submit', function(evt){
    validId = fnValidId();
    validPw = fnValidPw();
    validPwCheck = fnValidPwCheck();
    validEmail = fnValidEmail();
    if(!validId) {
      alert('아이디를 확인하세요.');
      evt.preventDefault();            // 서브밋 취소하기
      return;                          // 이벤트 종료하기
    } else if(!validPw || !validPwCheck){
      alert('비밀번호를를 확인하세요.');
      evt.preventDefault();  
      return;             
    } else if(!validEmail){
      alert('이메일을 확인하세요.');
      evt.preventDefault();
      return;
    }
  })

  // 잘못된 동작이 있을경우 submit을 하지 못하게 preventdefault로 막는게 핵심! sumbit의 대상은 form임을 다시한번 주의~ getElementById('frm-join')이다! 서브밋 버튼이 아니라!
  
  
</script>







</body>
</html>